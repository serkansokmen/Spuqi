{% extends 'userena/base_userena.html' %}
{% load i18n %}
{% load endless %}

{% block title %}{% blocktrans with user.username as username %}{{ username }}'s profile.{% endblocktrans %}{% endblock %}

{% block content_title %}
<div class="row-fluid">
    <div class="span1">
        <img src="{{ profile.get_mugshot_url }}" alt="{{ profile.get_full_name }}" />
    </div>
    <div class="span5">
        <strong>{{ profile.user.username }}</strong>
        <br>
        {% if profile.user.get_full_name %}
            <p>{{ profile.user.get_full_name }}</p>
        {% endif %}
    </div>
    <div class="span6">
        <a class="btn btn-success pull-right" href="{% url quote_add %}"><i class="icon-plus-sign "></i> {% trans "New Quote" %}</a>
    </div>
</div>
{% endblock content_title %}

{% block content %}
<hr>
    <div class="row-fluid">
        <div class="span4 well">
            <a class="btn btn-link" href="{% url collection_add %}"><i class="icon-plus-sign "></i> {% trans "New Collection" %}</a>
            <hr>
            <h4>
                {% if profile.user.owned_collections.count > 0 %}
                <i class="icon-folder-close"></i>
                {% else %}
                <i class="icon-folder-close-alt"></i>
                {% endif %}
                {% trans "Your Collections" %}
            </h4>
            <ul>
            {% for collection in profile.user.owned_collections.all %}
                {% ifequal profile.user collection.user %}
                <li>
                    <a href="{{ collection.get_absolute_url }}">{{ collection }}</a>
                    <div class="pull-right">
                        <a href="{% url collection_edit slug=collection.slug %}">
                            <i class="icon-pencil"></i>
                        </a>
                        <a href="{% url collection_delete slug=collection.slug %}">
                            <i class="icon-trash"></i>
                        </a>
                    </div>
                </li>
                {% endifequal %}
            {% empty %}
                {% trans "No collections" %}
            {% endfor %}
            </ul>
            <hr>
            <h4>
                {% if profile.user.followed_collections.count > 0 %}
                <i class="icon-folder-close"></i>
                {% else %}
                <i class="icon-folder-close-alt"></i>
                {% endif %}
                {% trans "Related collections" %}
            </h4>
            <ul>
            {% for collection in profile.user.followed_collections.all %}
                {% ifnotequal profile.user collection.user %}
                <li>
                    <a href="{{ collection.get_absolute_url }}">{{ collection }}</a>
                    <div class="pull-right">
                        <a href="{% url collection_edit slug=collection.slug %}">
                            <i class="icon-pencil"></i>
                        </a>
                        <a href="{% url collection_delete slug=collection.slug %}">
                            <i class="icon-trash"></i>
                        </a>
                    </div>
                </li>
                {% endifnotequal %}
            {% empty %}
                {% trans "No collections" %}
            {% endfor %}
            </ul>
        </div>
        <div class="span8">
            {% if user == profile.user %}
                {% with user.quote_set.all as quotes %}
                    {% paginate 5 quotes %}
                    {% include "quotes/quote_list.html" %}
                    {% show_pages %}
                {% endwith %}
            {% else %}
                {% with profile.user.quote_set.all as quotes %}
                    {% paginate 5 quotes %}
                    {% include "quotes/quote_list.html" %}
                    {% show_pages %}
                {% endwith %}
            {% endif %}
        </div>
    </div>
{% endblock content %}
