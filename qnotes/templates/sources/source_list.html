{% extends "base.html" %}
{% load i18n %}
{% load endless %}

{% block header_actions %}
<a class="btn btn-success btn-large" href="{% url source_add %}"><i class="icon-plus-sign icon-large"></i> {% trans "New Source" %}</a>
{% endblock header_actions %}

{% block content %}
<table class="table table-condensed table-striped">
    <thead>
        <tr>
            <th>{% trans "Source" %}</th>
            <th>{% trans "ISBN" %}</th>
            <td>{% trans "Authors" %}</td>
            <td>&nbsp;</td>
        </tr>
    </thead>
    <tbody>
        {% paginate sources %}
        {% for source in sources %}
        <tr>
            <td>
                {% ifequal source current_source %}
                {{ source }}
                {% else %}
                <a href="{{ source.get_absolute_url }}" title="{{ source }}">{{ source }}</a>
                {% endifequal %}
            </td>
            <td>{{ source.isbn|default:"-" }}</td>
            <td>{% for author in source.authors.all %}{{ author }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
            <td>
                <div class="btn-group pull-right">
                    {% ifequal source.user request.user %}
                    <a class="btn" href="{% url source_edit slug=source.slug %}">
                        <i class="icon-pencil"></i>
                    </a>
                    <a class="btn btn-danger" href="{% url source_delete slug=source.slug %}">
                        <i class="icon-trash"></i>
                    </a>
                    {% endifequal %}
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% show_pages %}
{% endblock content %}
